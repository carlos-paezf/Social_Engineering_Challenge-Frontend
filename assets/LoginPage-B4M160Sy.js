import{w as p,a as h,j as e,L as j,x as f,u as y,r as i,M as w}from"./index-CduOU6HX.js";const N=()=>p({mutationFn:async s=>(await h.post("/auth",s)).data}),v=({handleSubmit:s,email:n,setEmail:l,password:o,setPassword:c,error:t,isPending:a})=>e.jsxs("form",{onSubmit:s,className:"bg-white shadow-md rounded px-8 pt-6 pb-8 max-w-sm w-full",children:[e.jsxs("label",{className:"block mb-4",children:[e.jsx("span",{className:"text-gray-700",children:"Correo electrónico"}),e.jsx("input",{type:"email",value:n,onChange:r=>l(r.target.value),required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800"})]}),e.jsxs("label",{className:"block mb-6",children:[e.jsx("span",{className:"text-gray-700",children:"Contraseña"}),e.jsx("input",{type:"password",value:o,onChange:r=>c(r.target.value),required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md p-2 text-gray-800"})]}),t&&e.jsx("p",{className:"text-sm text-red-600 mb-4 text-center",children:t}),e.jsx("button",{type:"submit",disabled:a,className:`w-full font-semibold py-2 px-4 rounded transition 
                            ${a?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}
                        `,children:"Ingresar"}),a&&e.jsx(j,{message:"Verificando con el servidor...",className:"py-4",size:"sm"})]}),L=()=>{const s=f(),{markLoginSuccess:n,markLoginFailure:l}=y(),[o,c]=i.useState(""),[t,a]=i.useState(""),[r,u]=i.useState(""),{mutate:m,isPending:x}=N(),g=b=>{b.preventDefault(),u(""),m({email:o,password:t},{onSuccess:d=>{d.success?(n(),s("/success-challenge")):(l(),u(d.message||"Acceso Denegado"),s("/failure-challenge"))},onError:()=>{u("Error de conexión. Intenta nuevamente.")}})};return e.jsx(w,{children:e.jsxs("div",{className:"h-screen flex flex-col items-center justify-center px-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-blue-700",children:"Accede al sistema"}),e.jsx(v,{handleSubmit:g,email:o,setEmail:c,password:t,setPassword:a,error:r,isPending:x})]})})};export{L as default};
